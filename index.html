<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>B√≠nh Ng·ªç Khai Xu√¢n</title>
<meta property="og:type" content="website" />
<meta property="og:title" content="B√≠nh Ng·ªç Khai Xu√¢n - Ch√†o Xu√¢n ƒê√≥n T·∫øt" />
<meta property="og:description" content="Tham gia ch∆∞∆°ng tr√¨nh B√≠nh Ng·ªç Khai Xu√¢n ‚Äì Ch√†o xu√¢n ƒë√≥n t·∫øt, nh·∫≠n l√¨ x√¨ may m·∫Øn t·ª´ H·ªá th·ªëng Xe Ng·ªçc Anh!" />
<meta property="og:image" content="https://bydthanhcong.vn/wp-content/uploads/2026/01/gen-h-anhbiaquayso.jpg" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />

  <style>
  .form-group {
    margin-bottom: 16px;
    text-align: left;
  }
  .form-label {
    display: block;
    margin-bottom: 8px;
    font-weight: 700;
    font-size: 14px;
    color: #333;
  }
  .required-mark {
    color: #d60000;
    margin-left: 4px;
  }
  .form-control {
    width: 100%;
    padding: 12px 16px;
    font-size: 14px;
    color: #333;
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 12px;
    outline: none;
    transition: all 0.2s ease;
  }
  .form-control:focus {
    border-color: #d60000;
    box-shadow: 0 0 0 3px rgba(214, 0, 0, 0.1);
  }
  .form-control::placeholder {
    color: #999;
    font-weight: 400;
  }
  select.form-control {
    appearance: none;
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 1rem center;
    background-size: 1em;
  }

  .popup-toggle-btn {
    position: fixed;
    bottom: 10%;
    left: 0;
    background-color: #d60000;
    color: white;
    font-size: 22px;
    padding: 10px 14px;
    border-radius: 0 10px 10px 0;
    cursor: pointer;
    z-index: 100000;
    box-shadow: 2px 2px 8px rgba(0,0,0,0.3);
    pointer-events: auto;
  }

  .popup-widget * { box-sizing: border-box; }
  .popup-widget {
    position: fixed;
    inset: 0;
    width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.3);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 99999;
    font-family: Arial, sans-serif;
    pointer-events: auto;
  }

  .popup-form {
    background: #ffffff;
    padding: 24px;
    border-radius: 16px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    max-width: 920px;
    width: 100%;
    position: relative;
    overflow: hidden;
    pointer-events: auto;
  }

  .popup-form::before{ content:none !important; }

  .qcads-left{ position: relative; }
  .qcads-left::before{
    content:"";
    position:absolute;
    inset:0;
    background: url('https://www.ngocanhcm.vn/data/category/thongtinweb.png') no-repeat left center;
    background-size: 115%;
    opacity: 0.12;
    z-index: 0;
    pointer-events: none;
  }
  .qcads-left > *{ position: relative; z-index: 1; }

  .qcads-popup-grid{
    display: flex;
    gap: 20px;
    align-items: stretch;
  }
  .qcads-left{
    flex: 1 1 56%;
    min-width: 0;
    display: flex;
    flex-direction: column;
    min-height: 560px;
  }
  .qcads-right{
    flex: 1 1 44%;
    min-width: 0;
    border-left: 1px solid rgba(0,0,0,0.08);
    padding-left: 18px;
  }

  .popup-form h2, .popup-form p {
    text-align: center;
    font-weight: 700;
  }
  .popup-form h2 { font-size: 18px; color: #d60000; margin: 0 0 8px; text-transform: uppercase; }
  .popup-form p { font-size: 14px; color: #555; margin: 0 0 20px; font-weight: 500;}

  .popup-form input[type="checkbox"] { margin-right: 6px; }
  .popup-form label.checkbox-label {
    font-size: 13px;
    display: flex;
    align-items: center;
    margin-top: 10px;
    color: #555;
    cursor: pointer;
  }

  .popup-form button {
    background: #d60000;
    color: white;
    padding: 12px 16px;
    border: none;
    border-radius: 12px;
    font-weight: bold;
    cursor: pointer;
    margin-top: 10px;
    transition: background 0.3s;
  }
  .popup-form button:hover {
    background: #b00000;
  }

  .popup-form .form-actions{
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    margin-top: 10px;
  }
  .popup-form .form-actions #submitBtn{ margin-top: 0; flex: 1; }
  .popup-form .form-actions .dismiss-link{
    margin-left: 0;
    color: #666;
    text-decoration: underline;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    white-space: nowrap;
  }

  .close-btn {
    position: absolute;
    top: 12px; right: 16px;
    cursor: pointer;
    font-size: 24px;
    color: #999;
    z-index: 10;
    pointer-events: auto;
    transition: color 0.3s;
  }
  .close-btn:hover { color: #d60000; }

  .site-footer {
    text-align: center;
    font-size: 12px;
    color: #777;
    padding: 10px 8px;
    border-top: 1px solid #ddd;
    margin-top: auto;
    background: rgba(255,255,255,0.75);
    backdrop-filter: blur(2px);
  }
  .site-footer strong { color: #111; }

  #wheelContainer { display: none; margin-top: 10px; text-align: center; }
  #wheel {
    border-radius: 50%;
    display: block;
    margin: 0 auto;
    border: 6px solid #fff;
    box-shadow: 0 0 25px rgba(255,255,255,0.4), inset 0 0 35px rgba(255,255,255,0.2);
    transition: transform 5s cubic-bezier(.23,1,.32,1);
  }
  .wheel-container {
    position: relative;
    width: 300px;
    height: 300px;
    margin: 0 auto;
  }
  .arrow {
    position: absolute;
    top: -20px; left: 50%;
    transform: translateX(-50%);
    width: 0; height: 0;
    border-left: 18px solid transparent;
    border-right: 18px solid transparent;
    border-bottom: 26px solid #ffde59;
    filter: drop-shadow(0 0 6px #fff);
    z-index: 15;
  }
  .center-button {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 90px; height: 90px;
    border-radius: 50%;
    background: linear-gradient(145deg, #ff007a, #ffde59);
    border: 4px solid white;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    cursor: pointer;
    box-shadow: 0 0 20px #ff007a, 0 0 40px #ffde59, inset 0 0 10px rgba(255,255,255,.5);
    user-select: none; z-index: 10;
    transition: all .3s ease;
  }
  .center-button:hover {
    transform: translate(-50%, -50%) scale(1.05);
    box-shadow: 0 0 25px #ffde59, 0 0 55px #ff007a;
  }
  .center-button span { color: white; font-weight: bold; font-size: 14px; }
  .center-button .pointer {
    position: absolute; top: 4px; left: 50%;
    transform: translateX(-50%);
    width: 0; height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 15px solid #fff;
    filter: drop-shadow(0 0 4px #fff);
  }
  #result {
    margin-top: 12px;
    font-size: 18px;
    font-weight: bold;
    color: #2c3e50;
    min-height: 28px;
  }

  .qcads-right-card{
    background: rgba(255,255,255,0.75);
    border-radius: 12px;
    padding: 14px 14px 12px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.06);
  }
  .qcads-hotline{
    display:flex;
    align-items:center;
    justify-content:center;
    margin-bottom: 10px;
  }
  .qcads-hotline .qcads-pill{
    display:inline-flex;
    align-items:center;
    gap:10px;
    padding: 10px 12px;
    border-radius: 999px;
    background: #ffffff;
    border: 1px solid rgba(0,0,0,0.08);
    box-shadow: 0 6px 16px rgba(0,0,0,0.07);
    font-weight: 800;
  }
  .qcads-hotline .qcads-pill .qcads-icon{
    width: 30px; height: 30px;
    border-radius: 50%;
    background: #1b5cff;
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size: 16px;
  }
  .qcads-hotline .qcads-pill .qcads-text{
    line-height: 1.1;
    text-align: left;
    font-size: 12px;
    font-weight: 800;
    color:#1a1a1a;
  }
  .qcads-hotline .qcads-pill .qcads-text b{
    display:block;
    font-size: 16px;
    letter-spacing: .3px;
    color:#0a2a7a;
  }
  .qcads-right ul{
    list-style: none;
    margin: 10px 0 14px;
    padding: 0;
  }
  .qcads-right li{
    margin: 8px 0;
    font-size: 15px;
    font-weight: 700;
    color:#222;
    display:flex;
    gap:8px;
    align-items:flex-start;
  }
  .qcads-right li .dot{
    width: 18px;
    flex: 0 0 18px;
    line-height: 1.2;
  }

  .qcads-logo{ display:block; padding: 14px 0 8px; }
  .qcads-logo .logo-box{
    width: 100%;
    height: 180px;
    display:flex;
    align-items:center;
    justify-content:center;
    background: transparent;
    border: none;
    padding: 0;
  }
  .qcads-logo .logo-box img{
    display:block;
    max-width:100%;
    max-height:100%;
    width:auto;
    height:auto;
    object-fit:contain;
  }

  .qcads-right-hot{
    position: relative;
    margin-top: 14px;
    padding: 14px 12px;
    border-radius: 14px;
    text-align: center;
    font-weight: 900;
    font-size: 13.5px;
    line-height: 1.5;
    color: #d60000;
    background: linear-gradient(135deg,#fff5f5,#ffffff,#fff5f5);
    border: 1px dashed rgba(214,0,0,.55);
    box-shadow: 0 8px 22px rgba(214,0,0,.18), inset 0 0 0 1px rgba(214,0,0,.15);
    overflow: hidden;
  }
  .qcads-right-hot::before{
    content: "üî•NH·∫¨N L·ªòC ƒê·∫¶U NƒÇMüî•";
    display: block;
    margin-bottom: 6px;
    font-size: 13px;
    letter-spacing: 1px;
    animation: qcadsHotBlink 1.4s infinite;
  }
  .qcads-right-hot::after{
    content:"";
    position:absolute;
    top:0;
    left:-70%;
    width:60%;
    height:100%;
    background: linear-gradient(120deg,transparent,rgba(255,255,255,0.75),transparent);
    animation: qcadsHotShine 3s infinite;
  }
  @keyframes qcadsHotBlink{ 0%,100%{opacity:1} 50%{opacity:.55} }
  @keyframes qcadsHotShine{ 0%{left:-70%} 100%{left:120%} }

  .qcads-right li .dot{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    width: 22px;
    height: 22px;
    border-radius: 8px;
    background: rgba(214,0,0,0.08);
    box-shadow: 0 0 0 rgba(214,0,0,0);
    animation: qcadsGiftPulse 1.2s infinite;
  }
  .qcads-right li:nth-child(2) .dot{ animation-delay: .15s; }
  .qcads-right li:nth-child(3) .dot{ animation-delay: .30s; }
  .qcads-right li:nth-child(4) .dot{ animation-delay: .45s; }
  .qcads-right li:nth-child(5) .dot{ animation-delay: .60s; }
  @keyframes qcadsGiftPulse{
    0%{transform:translateY(0) scale(1); box-shadow:0 0 0 rgba(214,0,0,0)}
    40%{transform:translateY(-1px) scale(1.08); box-shadow:0 10px 18px rgba(214,0,0,.15)}
    70%{transform:translateY(0) scale(1.02)}
    100%{transform:translateY(0) scale(1); box-shadow:0 0 0 rgba(214,0,0,0)}
  }

  #qcadsAlert{
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 200000;
  }
  .qcads-alert-box{
    background: #fff;
    border-radius: 14px;
    padding: 18px 16px 14px;
    max-width: 420px;
    width: 92%;
    text-align: center;
    box-shadow: 0 20px 40px rgba(0,0,0,.25);
  }
  .qcads-alert-box h3{
    margin: 0 0 8px;
    font-size: 18px;
    font-weight: 900;
    color: #d60000;
  }
  .qcads-alert-box p{
    margin: 0;
    font-size: 14px;
    line-height: 1.5;
    color: #222;
  }
  .qcads-alert-box button{
    margin-top: 12px;
    padding: 10px 16px;
    border-radius: 10px;
    border: none;
    background: #d60000;
    color: #fff;
    font-weight: 800;
    cursor: pointer;
  }

  @media screen and (max-width: 768px){
    #qcadsPopup .qcads-right,
    #qcadsPopup .qcads-popup-grid > .qcads-right{
      display: none !important;
      width: 0 !important;
      max-width: 0 !important;
      padding: 0 !important;
      margin: 0 !important;
      border: 0 !important;
      overflow: hidden !important;
    }
    #qcadsPopup .qcads-popup-grid{
      display: block !important;
    }
    #qcadsPopup .qcads-left{
      width: 100% !important;
      max-width: 100% !important;
    }
    #qcadsPopup .popup-form{
      max-width: 92% !important;
      padding: 16px !important;
    }
  }

  .NAoverlay, .NAoverlay *{ box-sizing:border-box; }
  .NAoverlay{
    position: fixed; inset: 0;
    display:none;
    align-items:center;
    justify-content:center;
    padding: 18px;
    background: rgba(0,0,0,.55);
    z-index: 150000;
  }
  .NAoverlay.show{ display:flex; }

  .NAmodal{
    width: min(980px, 94vw);
    border-radius: 18px;
    background: #fff;
    box-shadow: 0 36px 120px rgba(0,0,0,.35);
    overflow:hidden;
    position: relative;
  }
  .NAmodal .NAclose {
    position: absolute;
    top: 6px;
    right: 6px;
    width: 30px;
    height: 30px;
    border-radius: 12px;
    border: 1px solid rgba(0,0,0,.10);
    background: rgba(255,255,255,.92);
    font-size: 16px;
    line-height: 28px;
    cursor: pointer;
    z-index: 5;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .NAheadBar{
    padding: 16px 18px 10px;
    text-align:center;
    background: radial-gradient(900px 320px at 50% 0%, rgba(255,178,0,.25), transparent 55%),
                linear-gradient(135deg, rgba(143,0,24,.08), rgba(255,45,85,.06));
    border-bottom: 1px solid rgba(0,0,0,.06);
  }
  .NAheadBar .t1{
    font-weight: 1000;
    color:#8f0018;
    letter-spacing:.6px;
    font-size: 20px;
  }
  .NAheadBar .t2{
    margin-top: 4px;
    font-size: 16px;
    color: rgba(0,0,0,.60);
    font-weight: 700;
  }

  .NAbody{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
    padding: 14px;
  }
  @media (max-width: 860px){
    .NAmodal{ width:min(560px, 94vw); }
    .NAbody{ grid-template-columns: 1fr; }
  }

  .NAleftPane{
    border-radius: 16px;
    border: 1px solid rgba(0,0,0,.06);
    background: linear-gradient(180deg, rgba(255,178,0,.14), rgba(255,255,255,.85));
    box-shadow: inset 0 1px 0 rgba(255,255,255,.7);
    padding: 12px;
    min-height: 360px;
  }
  .NAleftPane .lbl{
    font-size: 11px;
    font-weight: 900;
    letter-spacing: .5px;
    color: rgba(0,0,0,.55);
  }
  .NAmoneyCard{
    margin-top: 10px;
    border-radius: 16px;
    background: rgba(255,255,255,.9);
    border: 1px solid rgba(255,178,0,.25);
    height: 180px;
    display:flex;
    align-items:center;
    justify-content:center;
    position: relative;
    overflow:hidden;
  }
  .NAmoneyCard img{
    max-width: 92%;
    max-height: 160px;
    width:auto;
    height:auto;
    transform: rotate(-3deg);
    filter: drop-shadow(0 22px 26px rgba(0,0,0,.18));
  }
  .NAshine{
    position:absolute; inset:-40px;
    background: linear-gradient(120deg, rgba(255,255,255,0), rgba(255,255,255,.7), rgba(255,255,255,0));
    transform: translateX(-70%) rotate(18deg);
    animation: NA_shine 1.8s ease-in-out infinite;
    opacity:.55;
    pointer-events:none;
  }
  @keyframes NA_shine{ 0%{transform:translateX(-70%) rotate(18deg)} 100%{transform:translateX(70%) rotate(18deg)} }

  .NAamountPill{
    display:inline-flex;
    align-items:center;
    gap: 8px;
    margin-top: 10px;
    padding: 8px 12px;
    border-radius: 999px;
    background: linear-gradient(135deg,#ffb200,#ffe29a);
    color:#111;
    font-weight: 1000;
    box-shadow: 0 14px 26px rgba(0,0,0,.14);
  }
  .NAamountPill b{ font-size: 18px; letter-spacing:.4px; }

  .NAactions{
    margin-top: 12px;
    display:flex;
    justify-content:center;
  }
  .NAactions button{
    border:0;
    cursor:pointer;
    padding: 12px 18px;
    border-radius: 999px;
    font-weight: 1000;
    letter-spacing: .4px;
    background: linear-gradient(135deg,#ffb200,#ffe29a);
    color:#111;
    box-shadow: 0 18px 36px rgba(0,0,0,.16);
  }

  .NArightPane{
    border-radius: 16px;
    overflow:hidden;
    position: relative;
    min-height: 360px;
    background: #f7f7f7;
    border: 1px solid rgba(0,0,0,.06);
  }
  .NAenvWrap{
    position: relative;
    width: 100%;
    height: 100%;
    min-height: 360px;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow: visible;
    --mx: 50%;
    --my: 48%;
    --mw: 56%;
    --mh: 18%;
  }
  .NAenvImg{
    width: min(260px, 72%) !important;
    max-width: 260px !important;
    height: auto;
    display:block;
    border-radius: 16px;
    box-shadow: 0 26px 55px rgba(0,0,0,.22);
    user-select:none;
    -webkit-user-drag:none;
  }

  .NAenvMouth{
    position:absolute;
    left: var(--mx);
    top:  var(--my);
    width: var(--mw);
    height: var(--mh);
    transform: translate(-50%,-50%);
    pointer-events:none;
    z-index: 6;
    clip-path: polygon(10% 70%, 50% 10%, 90% 70%, 90% 100%, 10% 100%);
  }
  .NAflap{
    position:absolute; inset:0;
    transform-origin: 50% 18%;
    transform: perspective(800px) rotateX(78deg);
    opacity: 0;
    background:
      linear-gradient(180deg, rgba(255,215,120,.0), rgba(255,215,120,.18)),
      radial-gradient(80% 120% at 50% 0%, rgba(255,255,255,.65), rgba(255,255,255,0));
    filter: drop-shadow(0 18px 22px rgba(0,0,0,.25));
    border-radius: 14px;
  }
  .NAinnerGlow{
    position:absolute; inset:-12px -10px -18px;
    background: radial-gradient(circle at 50% 40%, rgba(255,178,0,.60), rgba(255,178,0,0) 62%);
    opacity: 0;
    transform: scale(.92);
    filter: blur(1px);
  }
  .NAenvWrap.opening .NAflap{ animation: NA_flapOpen .55s cubic-bezier(.2,.9,.2,1) forwards; }
  .NAenvWrap.opening .NAinnerGlow{ animation: NA_glowIn .65s ease-out forwards; }
  @keyframes NA_flapOpen{
    0%   { opacity:0; transform: perspective(800px) rotateX(86deg) translateY(8px); }
    20%  { opacity:1; }
    100% { opacity:1; transform: perspective(800px) rotateX(16deg) translateY(-2px); }
  }
  @keyframes NA_glowIn{
    0%   { opacity:0; transform: scale(.88); }
    60%  { opacity:1; transform: scale(1.02); }
    100% { opacity:.95; transform: scale(1); }
  }

  .NApopCash{
    position:absolute;
    left: var(--mx);
    top:  var(--my);
    transform: translate(-50%,-50%);
    width: var(--mw);
    height: var(--mh);
    pointer-events:none;
    z-index: 7;
  }
  .NApopCash img{
    position:absolute;
    left:50%;
    bottom: -6px;
    width: min(260px, 86%);
    height:auto;
    opacity: 0;
    transform: translateX(-50%) translateY(44px) rotate(-10deg) scale(.92);
    filter: drop-shadow(0 26px 34px rgba(0,0,0,.22));
  }
  .NAenvWrap.opening .NApopCash img{
    animation: NA_popUp .70s cubic-bezier(.12,.9,.12,1) .12s forwards;
  }
  @keyframes NA_popUp{
    0%   { opacity:0; transform: translateX(-50%) translateY(44px) rotate(-10deg) scale(.92); }
    38%  { opacity:1; transform: translateX(-50%) translateY(-14px) rotate(-6deg) scale(1.05); }
    70%  { opacity:1; transform: translateX(-50%) translateY(-8px)  rotate(-6deg) scale(1.01); }
    100% { opacity:1; transform: translateX(-50%) translateY(-10px) rotate(-6deg) scale(1.02); }
  }

  .NAmoneyLayer, .NAsparkLayer{
    position:absolute; inset:0;
    pointer-events:none;
    overflow: visible;
    z-index: 8;
  }
  .NAcash{
    position:absolute;
    left: var(--sx); top: var(--sy);
    width: var(--w);
    height:auto;
    opacity: 0;
    transform: translate(-50%,-50%) scale(.72) rotate(0deg);
    filter: drop-shadow(0 18px 24px rgba(0,0,0,.18));
    border-radius: 12px;
    animation: NA_fly 1.25s ease-out forwards;
  }
  .NAcoin{
    position:absolute;
    left: var(--sx); top: var(--sy);
    width: var(--d); height: var(--d);
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #fff3c4 0%, #ffd166 30%, #ffb200 60%, #e39b00 100%);
    border: 1px solid rgba(0,0,0,.10);
    box-shadow: 0 18px 34px rgba(0,0,0,.16), inset 0 2px 8px rgba(255,255,255,.35);
    opacity:0;
    transform: translate(-50%,-50%) scale(.7);
    animation: NA_fly 1.25s ease-out forwards;
  }
  .NAcoin:before{
    content:"";
    position:absolute; inset: 22%;
    border-radius: 50%;
    border: 2px solid rgba(0,0,0,.12);
  }
  .NAspark{
    position:absolute;
    left: var(--sx); top: var(--sy);
    width: 7px; height: 7px;
    border-radius: 50%;
    background: rgba(255,178,0,.95);
    box-shadow: 0 0 22px rgba(255,178,0,.6), 0 0 46px rgba(255,178,0,.22);
    opacity: 0;
    transform: translate(-50%,-50%) scale(.6);
    animation: NA_spark 0.95s ease-out forwards;
  }
  @keyframes NA_fly{
    0%{ opacity:0; transform: translate(-50%,-50%) scale(.65) rotate(0deg); }
    12%{ opacity:1; }
    100%{ opacity:0; transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(1) rotate(var(--rot)); }
  }
  @keyframes NA_spark{
    0%{ opacity:0; transform: translate(-50%,-50%) scale(.6); }
    18%{ opacity:1; }
    100%{ opacity:0; transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(1.05); }
  }

  .NAinfoBox{
    padding: 16px 18px 18px;
  }
  .NAinfoBox .top1{
    text-align:center;
    font-weight:1000;
    font-size: 13px;
    color: rgba(0,0,0,.70);
    letter-spacing:.4px;
  }
  .NAinfoBox .top2{
    text-align:center;
    font-weight:1000;
    font-size: 13px;
    margin-top: 4px;
    color: rgba(143,0,24,.92);
  }
  .NAinfoBox .top3{
    text-align:center;
    margin-top: 6px;
    font-size: 12px;
    color: rgba(0,0,0,.60);
  }
  .NAinfoBox .thanks1{
    margin-top: 14px;
    text-align:center;
    font-weight:1000;
    color: rgba(0,0,0,.70);
  }
  .NAinfoBox .thanks2{
    margin-top: 4px;
    text-align:center;
    font-weight:1000;
    color:#0a8f4a;
  }
  .NAinfoBox .codeLine{
    margin-top: 10px;
    text-align:center;
    font-size: 13px;
    color: rgba(0,0,0,.70);
  }
  .NAinfoBox .codeLine b{
    display:inline-block;
    padding: 6px 10px;
    border-radius: 999px;
    background: linear-gradient(135deg,#ffb200,#ffe29a);
    color:#111;
    box-shadow: 0 12px 26px rgba(0,0,0,.12);
    letter-spacing:.8px;
  }
  .NAinfoBox .subNote{
    margin-top: 8px;
    text-align:center;
    font-size: 11px;
    color: rgba(0,0,0,.45);
  }
  .NAinfoBox .warn{
    margin: 12px auto 0;
    max-width: 860px;
    font-size: 12px;
    line-height: 1.45;
    color: rgba(0,0,0,.68);
    padding: 12px;
    border-radius: 14px;
    background: rgba(255,178,0,.10);
    border: 1px dashed rgba(255,178,0,.45);
  }
  .NAinfoBox .site{
    margin-top: 12px;
    text-align:center;
    font-weight:1000;
    color: rgba(0,0,0,.55);
  }
  .NAinfoBox .copy{
    margin-top: 6px;
    text-align:center;
    font-size: 11px;
    color: rgba(0,0,0,.42);
  }
.qcads-code-line{
  margin-top:10px;
  text-align:center;
  font-weight:900;
  font-size:15px;
  color:#111;
}

.qcads-code-gold{
  display:inline-block;
  margin-left:6px;
  padding:6px 12px;
  border-radius:999px;
  background: linear-gradient(135deg,#ffb200,#ffe29a);
  color:#111;
  letter-spacing:.8px;
  box-shadow:0 10px 22px rgba(0,0,0,.15);
}

  @media (max-width: 768px){

    .NAmodal {
      width: 94vw !important;
      max-height: 90vh !important; 
      overflow-y: auto !important; 
      display: flex;
      flex-direction: column;
    }

    .NAheadBar { padding: 10px 5px !important; }
    .NAheadBar .t1 { font-size: 15px !important; margin-bottom: 2px; }
    .NAheadBar .t2 { font-size: 12px !important; }

    .NAleftPane {
      min-height: auto !important;
      padding: 10px !important;
    }
    .NAmoneyCard {
      height: 110px !important;
      margin-top: 5px !important;
    }
    .NAmoneyCard img {
      max-height: 90px !important;
    }
    .NAamountPill {
      margin-top: 8px !important;
      padding: 5px 10px !important;
    }
    .NAamountPill b { font-size: 16px !important; }
    .NAactions button {
      padding: 8px 16px !important;
      font-size: 13px !important;
      margin-top: 0 !important;
    }

    .NArightPane,
    .NAenvWrap {
      min-height: 200px !important;
    }
    .NAenvImg {
      width: 160px !important;
      max-width: 80% !important;
      transform: translateY(0) !important;
    }

    .NAbody {
      padding: 10px !important;
      gap: 10px !important;
    }

    #qcadsPopup .popup-form {
      padding: 15px !important;
      max-height: 90vh;
      overflow-y: auto;
    }
    #qcadsPopup h2 { font-size: 15px !important; margin-bottom: 5px !important; }
    
    .wheel-container { 
      width: 260px !important; 
      height: 260px !important; 
      margin-top: 10px !important;
    } 
    #wheel { 
      width: 260px !important; 
      height: 260px !important; 
    }
    .center-button {
      width: 70px !important;
      height: 70px !important;
    }
    .center-button span { font-size: 12px !important; }
  }
  </style>
</head>

<body>

<div class="popup-toggle-btn" id="qcadsGiftBtn">üéÅ</div>

<div class="popup-widget" id="qcadsPopup">
  <div class="popup-form">
    <span class="close-btn" title="ƒê√≥ng" tabindex="0">√ó</span>

    <div class="qcads-popup-grid">
      <div class="qcads-left">
        <h2>üå∏ KHAI XU√ÇN PH√ÅT L·ªòCüå∏<br>KH·ªûI ƒê·ªòNG NƒÇM M·ªöI C√ôNG NG·ªåC ANH</h2>
        <p>XE NG·ªåC ANH ‚Äì UY T√çN - CH·∫§T L∆Ø·ª¢NG - GI√Å T·ªêT</p>

        <form id="registerForm">
          
          <div class="form-group">
            <label class="form-label">H·ªç v√† t√™n <span class="required-mark">*</span></label>
            <input type="text" class="form-control" name="name" placeholder="Nh·∫≠p T√™n VD Nguy·ªÖn VƒÉn A" required />
          </div>

          <div class="form-group">
            <label class="form-label">S·ªë ƒëi·ªán tho·∫°i <span class="required-mark">*</span></label>
            <input type="text" class="form-control" name="phone" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i, VD: 09xxxxxxxx" required />
          </div>

          <div class="form-group">
            <label class="form-label">ƒê·ªãa ch·ªâ <span class="required-mark">*</span></label>
            <input type="text" class="form-control" name="address" placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ VD: 168, Nguy·ªÖn VƒÉn C·ª´..." required />
          </div>

          <div class="form-group">
            <label class="form-label">D√≤ng xe quan t√¢m <span class="required-mark">*</span></label>
            <input type="text" class="form-control" name="car" placeholder="Nh·∫≠p d√≤ng xe b·∫°n mu·ªën mua..." required />
          </div>

          <div class="form-group">
            <label class="form-label">C·ª≠a h√†ng <span class="required-mark">*</span></label>
            <select name="note" class="form-control" required>
              <option value="">Ch·ªçn c·ª≠a h√†ng anh ch·ªã mua xe</option>
              <option value="Ph∆∞·ªùng 5">Ph∆∞·ªùng 5</option>
              <option value="Ph∆∞·ªùng 6">Ph∆∞·ªùng 6</option>
              <option value="Ph∆∞·ªùng 7">Ph∆∞·ªùng 7</option>
              <option value="Ph∆∞·ªùng 8">Ph∆∞·ªùng 8</option>
              <option value="Th·ªõi B√¨nh">Th·ªõi B√¨nh</option>
              <option value="U Minh">U Minh</option>
              <option value="C√°i N∆∞·ªõc">C√°i N∆∞·ªõc</option>
              <option value="ƒê·∫ßm D∆°i">ƒê·∫ßm D∆°i</option>
              <option value="Tr·∫ßn VƒÉn Th·ªùi">Tr·∫ßn VƒÉn Th·ªùi</option>
              <option value="NƒÉm CƒÉn">NƒÉm CƒÉn</option>
            </select>
          </div>
          
          <label class="checkbox-label">
            <input type="checkbox" required /> T√¥i ƒë·ªìng √Ω v·ªõi ƒëi·ªÅu kho·∫£n c·ªßa Xe Ng·ªçc Anh
          </label>

          <div class="form-actions">
            <button type="submit" id="submitBtn">ƒêƒÇNG K√ù NGAY</button>
            <a class="dismiss-link" tabindex="0">B·ªØa kh√°c nha!</a>
          </div>
        </form>

        <div id="wheelContainer">
          <div class="wheel-container" id="qcadsWheelBox">
            <div class="arrow"></div>
            <canvas id="wheel" width="300" height="300"></canvas>
            <div class="center-button" id="spinBtn" tabindex="0">
              <div class="pointer"></div>
              <span>Quay</span>
            </div>
          </div>
          <div id="result"></div>

          <div id="qcadsFinalBox" style="display:none; margin-top:12px;">
        <div style="font-family: Arial, sans-serif; text-align:center; font-weight:700; color:#0a8f4a; font-size:16px;">
          üéâ C·∫£m ∆†n Anh/Ch·ªã <span id="qcadsFinalName" style="color:#0a8f4a;"></span><br/>
          ƒê√É THAM GIA CH∆Ø∆†NG TR√åNHüòò
        </div>

                      <div class="qcads-code-line">
            M√É L√å X√å L√Ä:
            <span id="qcadsFinalCode" class="qcads-code-gold">NA000000</span>
          </div>

            <div id="qcadsFinalMoney"
                 style="margin-top:6px; text-align:center; font-weight:1000; font-size:30px; color:#d60000;">
              100.000ƒë
            </div>

            <div style="font-family: Arial, sans-serif; margin-top:8px; text-align:center; font-weight:700; color:#000; line-height:1.5;">
              ANH CH·ªä VUI L√íNG<br/>CH·ª§P M√ÄN H√åNH HO·∫∂C
              ƒê·ªåC T√äN + S·ªê ƒêI·ªÜN THO·∫†I<br/>KHI NH·∫¨N L√å X√å T·ª™ C·ª¨A H√ÄNG.
            </div>

            <div style="margin-top:10px; border-radius:14px; padding:12px; background:rgba(255,245,245,.85); border:2px dashed rgba(214,0,0,.35); color:#d60000; line-height:1.5; font-size:13px; font-weight:800;">
              üîî ‚ÄúL√¨ x√¨ ƒë∆∞·ª£c quy ƒë·ªïi th√†nh ti·ªÅn m·∫∑t v√† ƒë∆∞·ª£c gi·∫£m gi√° tr·ª±c ti·∫øp khi mua xe.
              M√£ l√¨ x√¨ ƒë∆∞·ª£c QuangCaoAds l∆∞u ƒë·ªÉ ƒë·ªëi chi·∫øu th√¥ng tin.‚Äù
            </div>
          </div>
        </div>

        <div class="site-footer">
          ¬© 2025 B·∫£n quy·ªÅn thu·ªôc v·ªÅ <strong>QuangCaoAds</strong> | Thi·∫øt k·∫ø b·ªüi<br><strong>MKT HLAds - Xe Ng·ªçc Anh C√† Mau</strong>
        </div>
      </div>

      <div class="qcads-right">
        <div class="qcads-right-card">
          <div class="qcads-hotline">
            <div class="qcads-pill">
              <div class="qcads-icon">‚òé</div>
              <div class="qcads-text">
                HOTLINE
                <b>08888 58 200</b>
              </div>
            </div>
          </div>

          <ul>
            <li><span class="dot">üöÄ</span><span>XE NG·ªåC ANH ‚Äì CH√çNH H√ÉNG, GI√Å T·ªêT</span></li>
            <li><span class="dot">üéÅ</span><span>Mua xe chu·∫©n ‚Äì Gi√° t·ªët</span></li>
            <li><span class="dot">üéÅ</span><span>Giao t·∫≠n nh√† to√†n t·ªânh</span></li>
            <li><span class="dot">üéÅ</span><span>Qu√† t·∫∑ng h·∫•p d·∫´n ‚Äì Tr·∫£ g√≥p duy·ªát nhanh</span></li>
            <li><span class="dot">üéÅ</span><span>Ng·ªçc Anh Th∆∞∆°ng hi·ªáu uy t√≠n 30 nƒÉm</span></li>
          </ul>

          <div class="qcads-logo">
            <div class="logo-box">
              <img src="https://bydthanhcong.vn/wp-content/uploads/2025/12/NGOC-ANH-LOGO-01-2048x1600.png" alt="Xe Ng·ªçc Anh Logo">
            </div>
          </div>

          <div class="qcads-right-hot">
            Anh Ch·ªã H√£y ƒë·ªÉ l·∫°i th√¥ng tin, ƒë·ªÉ nh·∫≠n l·ªôc l√¨ x√¨ t·ª´ Ng·ªçc Anh!
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<div id="qcadsAlert">
  <div class="qcads-alert-box">
    <h3>üéÅ Th√¥ng b√°o</h3>
    <p id="qcadsAlertText"></p>
    <button type="button" id="qcadsAlertOk">ƒê√£ hi·ªÉu</button>
  </div>
</div>

<div class="NAoverlay" id="NAoverlay" aria-hidden="true">
  <div class="NAmodal" role="dialog" aria-modal="true">
    <button class="NAclose" id="NAclose" aria-label="ƒê√≥ng">√ó</button>

    <div class="NAheadBar">
      <div class="t1">H·ªÜ TH·ªêNG XE NG·ªåC ANH C√Ä MAU</div>
      <div class="t2">Ch√∫c m·ª´ng Anh/Ch·ªã ƒë√£ nh·∫≠n ƒë∆∞·ª£c l√¨ x√¨ may m·∫Øn</div>
    </div>

    <div id="NAviewLixi">
      <div class="NAbody">
        <div class="NAleftPane">
          <div class="lbl">L√¨ X√¨ Tr·ªã Gi√°</div>
          <div class="NAmoneyCard">
            <img id="NApreviewImg" alt="Ti·ªÅn tr√∫ng" />
            <div class="NAshine" aria-hidden="true"></div>
          </div>
          <div class="NAamountPill">+ <b id="NAwinValue">---</b></div>

          <div class="NAactions">
            <button type="button" id="NAclaimBtn">NH·∫¨N L√å X√å Ngay</button>
          </div>
        </div>

        <div class="NArightPane">
          <div class="NAenvWrap" id="NAenvWrap">
            <img class="NAenvImg" id="NAenvImg"
                 src="https://bydthanhcong.vn/wp-content/uploads/2026/01/baolixi.png"
                 alt="Bao l√¨ x√¨ Ng·ªçc Anh" />
            <div class="NAenvMouth" aria-hidden="true">
              <div class="NAflap"></div>
              <div class="NAinnerGlow"></div>
            </div>
            <div class="NApopCash" id="NApopCash" aria-hidden="true"></div>
            <div class="NAmoneyLayer" id="NAmoneyLayer" aria-hidden="true"></div>
            <div class="NAsparkLayer" id="NAsparkLayer" aria-hidden="true"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="NAviewInfo" style="display:none;">
      <div class="NAinfoBox">
        <div class="top1">üî•GIAO DI·ªÜN N√ÇNG C·∫§Püî•</div>
        <div class="top2">N√ÇNG T·∫¶M TR·∫¢I NGHI·ªÜM QU√ù KH√ÅCH H√ÄNG</div>
        <div class="top3"><b>XE NG·ªåC ANH</b> ‚Äî UY T√çN ‚Ä¢ CH·∫§T L∆Ø·ª¢NG ‚Ä¢ GI√Å T·ªêT</div>

        <div class="thanks1">C·∫¢M ∆†N ANH/CH·ªä V·∫™N C√íN ·ªû L·∫†I</div>
        <div class="thanks2">ƒê√É THAM GIA CH∆Ø∆†NG TR√åNH!</div>

        <div class="codeLine">M√É QU√Ä T·∫∂NG L√Ä: <b id="NAvoucherCode">NA000000</b></div>
        <div class="subNote">T·∫†I NGHƒ®A (D·ª∞ PH√íNG)</div>

        <div class="warn">
          <b>ANH CH·ªä VUI L√íNG CH·ª§P M√ÄN H√åNH HO·∫∂C ƒê·ªåC T√äN + S·ªê ƒêI·ªÜN THO·∫†I</b><br/>
          L√¨ X√¨ <b>ƒê∆∞·ª£c quy ƒë·ªïi th√†nh ti·ªÅn m·∫∑t</b> v√† ƒë∆∞·ª£c √°p d·ª•ng <b>khi mua xe</b>.
          M√£ Qu√† T·∫∑ng ƒë∆∞·ª£c Qu·∫£n l√Ω b·ªùi <b>QuangCaoAds</b> l∆∞u ƒë·ªÉ ƒë·ªëi chi·∫øu khi nh·∫≠n th∆∞·ªüng.
        </div>

        <div class="site">www.ngocanhcm.vn</div>
        <div class="copy">¬©2026 b·∫£n quy·ªÅn thu·ªôc v·ªÅ QuangCaoAds ‚Ä¢ MKT HLAAds ‚Ä¢ Xe Ng·ªçc Anh C√† Mau</div>

        <div class="NAactions" style="margin-top:14px;">
          <button type="button" id="NAcloseInfoBtn">ƒê√ìNG</button>
        </div>
      </div>
    </div>

  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script type="text/javascript">
var QCADS_API_URL = "https://script.google.com/macros/s/AKfycbxjVoW-4fBX7_GQ_enSaypnYOamPplebFxfzj5VA96BD_oJosl9CbezbJx_tugRARhMPA/exec";

function qcadsShowAlert(text){
  var box = document.getElementById('qcadsAlert');
  var t = document.getElementById('qcadsAlertText');
  if (!box || !t) return;
  t.innerText = text || '';
  box.style.display = 'flex';
}
function qcadsCloseAlert(){
  var box = document.getElementById('qcadsAlert');
  if (!box) return;
  box.style.display = 'none';
}
(function(){
  var ok = document.getElementById('qcadsAlertOk');
  if (ok) ok.addEventListener('click', qcadsCloseAlert);
})();

window.showPopup = function () {
  var popup = document.getElementById('qcadsPopup') || document.querySelector('.popup-widget');
  if (!popup) return;
  popup.style.display = 'flex';

  if (typeof confetti !== 'undefined') {
    confetti({ particleCount: 150, spread: 100, origin: { y: 0.6 } });
    setTimeout(function () {
      confetti({ particleCount: 100, spread: 80, origin: { y: 0.6 } });
    }, 500);
  }
};
window.qcadsHidePopup = function () {
  var popup = document.getElementById('qcadsPopup') || document.querySelector('.popup-widget');
  if (!popup) return;
  popup.style.display = 'none';
};

var NAoverlay = document.getElementById('NAoverlay');
var NAclose = document.getElementById('NAclose');
var NAclaimBtn = document.getElementById('NAclaimBtn');
var NAcloseInfoBtn = document.getElementById('NAcloseInfoBtn');
var NAviewLixi = document.getElementById('NAviewLixi');
var NAviewInfo = document.getElementById('NAviewInfo');
var NAwinValue = document.getElementById('NAwinValue');
var NAvoucherCode = document.getElementById('NAvoucherCode');
var NApopCash = document.getElementById('NApopCash');
var NAmoneyLayer = document.getElementById('NAmoneyLayer');
var NAsparkLayer = document.getElementById('NAsparkLayer');
var NAenvWrap = document.getElementById('NAenvWrap');
var NAenvImg = document.getElementById('NAenvImg');
var NApPreview = document.getElementById('NApreviewImg');

var MONEY_IMG = {
  100: "https://bydthanhcong.vn/wp-content/uploads/2026/01/100.png",
  150: "https://bydthanhcong.vn/wp-content/uploads/2026/01/150.png",
  200: "https://bydthanhcong.vn/wp-content/uploads/2026/01/200.png",
  250: "https://bydthanhcong.vn/wp-content/uploads/2026/01/250.png",
  500: "https://bydthanhcong.vn/wp-content/uploads/2026/01/500.png",
  "Vali": "https://bydthanhcong.vn/wp-content/uploads/2026/01/250k.png", // Thay ·∫£nh Vali n·∫øu c√≥
  "TaiNghe": "https://bydthanhcong.vn/wp-content/uploads/2026/01/tainghe.png"
};

var LIXI_MAP = [100, 150, 200, 250, 500, "Vali", "TaiNghe"];

var mouthX = 0.50, mouthY = 0.48, mouthW = "56%", mouthH = "18%";

function NA_rand(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

function NA_show(){
  if (!NAoverlay) return;
  NAoverlay.classList.add('show');
  NAoverlay.setAttribute('aria-hidden','false');
}
function NA_hide(){
  if (!NAoverlay) return;
  NAoverlay.classList.remove('show');
  NAoverlay.setAttribute('aria-hidden','true');
}

function NA_showLixiView(){
  NAviewInfo.style.display = "none";
  NAviewLixi.style.display = "";
}
function NA_showInfoView(){
  NAviewLixi.style.display = "none";
  NAviewInfo.style.display = "";
}

function NA_clearFX(){
  if (NAmoneyLayer) NAmoneyLayer.innerHTML = "";
  if (NAsparkLayer) NAsparkLayer.innerHTML = "";
  if (NApopCash) NApopCash.innerHTML = "";
  if (NAenvWrap) NAenvWrap.classList.remove('opening');
}

function NA_getMouthPos(){
  var rect = NAenvImg.getBoundingClientRect();
  var wrapRect = NAenvWrap.getBoundingClientRect();
  var x = (rect.left - wrapRect.left) + rect.width  * mouthX;
  var y = (rect.top  - wrapRect.top ) + rect.height * mouthY;
  return { x: x, y: y };
}

function NA_burst(win){
  NAenvWrap.style.setProperty('--mx', (mouthX*100) + '%');
  NAenvWrap.style.setProperty('--my', (mouthY*100) + '%');
  NAenvWrap.style.setProperty('--mw', mouthW);
  NAenvWrap.style.setProperty('--mh', mouthH);

  NA_clearFX();
  void NAenvWrap.offsetWidth;
  NAenvWrap.classList.add('opening');

  var url = MONEY_IMG[win] || "";
  
  if (url) {
    NApPreview.src = url;
    NApPreview.style.opacity = "1";
  } else {
    NApPreview.removeAttribute("src");
    NApPreview.style.opacity = "0";
  }

  if (url) {
    var im = document.createElement('img');
    im.src = url;
    im.alt = "Qu√† t·∫∑ng";
    NApopCash.appendChild(im);
  }

  if (typeof win === 'number') {
      setTimeout(function(){
        var pos = NA_getMouthPos();
        var cashCount = (win >= 500) ? 16 : (win >= 400) ? 14 : (win >= 300) ? 12 : 10;
        var coinCount = (win >= 500) ? 22 : 18;
        var sparkCount = (win >= 500) ? 42 : 34;

        var i, spread, wMin, wMax;

        for(i=0;i<cashCount;i++){
          if (!url) break;
          var img = document.createElement('img');
          img.className = 'NAcash';
          img.src = url;
          img.style.setProperty('--sx', pos.x + 'px');
          img.style.setProperty('--sy', pos.y + 'px');
          spread = (win >= 500) ? 220 : 185;
          img.style.setProperty('--tx', NA_rand(-spread, spread) + 'px');
          img.style.setProperty('--ty', NA_rand(-270, -85) + 'px');
          img.style.setProperty('--rot', NA_rand(-320, 320) + 'deg');
          wMin = (win >= 500) ? 74 : 68;
          wMax = (win >= 500) ? 112 : 100;
          img.style.setProperty('--w', NA_rand(wMin, wMax) + 'px');
          img.style.animationDelay = (i * 0.022) + 's';
          NAmoneyLayer.appendChild(img);
        }
        
        for(i=0;i<coinCount;i++){
           var c = document.createElement('div');
           c.className = 'NAcoin';
           c.style.setProperty('--sx', pos.x + 'px');
           c.style.setProperty('--sy', pos.y + 'px');
           c.style.setProperty('--tx', NA_rand(-220, 220) + 'px');
           c.style.setProperty('--ty', NA_rand(-250, -40) + 'px');
           c.style.setProperty('--rot', NA_rand(-340, 340) + 'deg');
           c.style.setProperty('--d', NA_rand(22, 46) + 'px');
           c.style.animationDelay = (i * 0.015) + 's';
           NAmoneyLayer.appendChild(c);
        }
        for(i=0;i<sparkCount;i++){
           var s = document.createElement('div');
           s.className = 'NAspark';
           s.style.setProperty('--sx', pos.x + 'px');
           s.style.setProperty('--sy', pos.y + 'px');
           s.style.setProperty('--tx', NA_rand(-240, 240) + 'px');
           s.style.setProperty('--ty', NA_rand(-290, 60) + 'px');
           s.style.animationDelay = (i * 0.01) + 's';
           NAsparkLayer.appendChild(s);
        }
        setTimeout(NA_clearFX, 2600);
      }, 640);
  } else {
      setTimeout(NA_clearFX, 2000);
  }
}

function NA_makeVoucherCode(){
  var num = String(NA_rand(0, 999999));
  while (num.length < 6) num = "0" + num;
  return "NA" + num;
}

if (NAclose) NAclose.addEventListener('click', function(){ NA_clearFX(); NA_hide(); });
if (NAcloseInfoBtn) NAcloseInfoBtn.addEventListener('click', function(){ NA_clearFX(); NA_hide(); });

function qcadsFormatResult(win) {
    if (typeof win === 'number') {
        return (win * 1000).toLocaleString('vi-VN') + "ƒë";
    } else {
        if (win === "Vali") return "Vali Cao C·∫•p";
        if (win === "TaiNghe") return "Tai Nghe Airpod";
        return win;
    }
}

if (NAclaimBtn) NAclaimBtn.addEventListener('click', function(){
  var box = document.getElementById('qcadsFinalBox');
  var nameEl = document.getElementById('qcadsFinalName');
  var codeEl = document.getElementById('qcadsFinalCode');
  var moneyEl = document.getElementById('qcadsFinalMoney');

  if (nameEl) nameEl.innerText = String(window.pendingUserName || "");
  if (codeEl) codeEl.innerText = String(window.NA_LAST_CODE || "NA000000");
  
  if (moneyEl) {
      moneyEl.innerText = qcadsFormatResult(window.NA_LAST_WIN);
  }

  if (box) box.style.display = 'block';

  var wheelBox = document.getElementById('qcadsWheelBox');
  if (wheelBox) wheelBox.style.display = 'none';

  var res = document.getElementById('result');
  if (res) res.style.display = 'none';

  NA_clearFX();
  NA_hide();

  setTimeout(function(){
    if (box) box.scrollIntoView({behavior:'smooth', block:'start'});
  }, 50);
});

if (NAoverlay) {
  NAoverlay.addEventListener('click', function(e){
    if (e.target === NAoverlay) { NA_clearFX(); NA_hide(); }
  });
}
document.addEventListener('keydown', function(e){
  if (e.key === 'Escape' && NAoverlay && NAoverlay.classList.contains('show')) {
    NA_clearFX(); NA_hide();
  }
});

var canvas = document.getElementById("wheel");
var ctx = canvas.getContext("2d");
var size = canvas.width;
var center = size / 2;

var segments = [
  "L√¨ X√¨<br>100.000ƒë",
  "L√¨ X√¨<br>150.000ƒë",
  "L√¨ X√¨<br>200.000ƒë",
  "L√¨ X√¨<br>250.000ƒë",
  "L√¨ X√¨<br>500.000ƒë",
  "Vali<br>Cao C·∫•p",
  "Tai Nghe<br>Airpood"
];

var colors = [
 ["#A8E6CF","#56C596"],
 ["#4FACFE","#0052D4"],
 ["#FF9A9E","#F6416C"],
 ["#FFE259","#FFA751"],
 ["#43E97B","#11998E"],
 ["#667EEA","#764BA2"],
 ["#ff5ebc","#c7007a"]
];

var arc = (2 * Math.PI) / segments.length;
var spinAngle = 0, spinning = false;

function qcadsJsonp(url, params, timeoutMs){
  timeoutMs = timeoutMs || 12000;
  return new Promise(function(resolve, reject){
    var cbName = "qcads_cb_" + Date.now() + "_" + Math.floor(Math.random()*100000);
    params = params || {};
    params.callback = cbName;

    var qs = [];
    for (var k in params) {
      if (!params.hasOwnProperty(k)) continue;
      qs.push(encodeURIComponent(k) + "=" + encodeURIComponent(String(params[k])));
    }

    var script = document.createElement("script");
    script.src = url + (url.indexOf("?") >= 0 ? "&" : "?") + qs.join("&");

    var timer = setTimeout(function(){
      cleanup();
      reject(new Error("timeout"));
    }, timeoutMs);

    window[cbName] = function(data){
      cleanup();
      resolve(data);
    };

    function cleanup(){
      clearTimeout(timer);
      if (script && script.parentNode) script.parentNode.removeChild(script);
      try { delete window[cbName]; } catch(e){ window[cbName] = undefined; }
    }

    script.onerror = function(){
      cleanup();
      reject(new Error("network"));
    };

    document.body.appendChild(script);
  });
}

function drawWheel() {
  for (var i = 0; i < segments.length; i++) {
    var angle = i * arc;
    var grad = ctx.createLinearGradient(0, 0, size, size);
    grad.addColorStop(0, colors[i][0]);
    grad.addColorStop(1, colors[i][1]);
    ctx.fillStyle = grad;

    ctx.beginPath();
    ctx.moveTo(center, center);
    ctx.arc(center, center, center, angle, angle + arc, false);
    ctx.fill();

    ctx.save();
    ctx.translate(center, center);
    ctx.rotate(angle + arc / 2);
    ctx.fillStyle = "white";
    ctx.font = "bold 16px sans-serif";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";

    var lines = segments[i].split("<br>");
    var lineHeight = 18;
    var textRadius = center - 45;

    for (var j = 0; j < lines.length; j++) {
      var lineY = (j - (lines.length - 1) / 2) * lineHeight;
      ctx.fillText(lines[j].trim(), textRadius, lineY);
    }
    ctx.restore();
  }
}
drawWheel();

function qcadsAllocPrizeFromApi() {
  var form = document.getElementById("registerForm");
  var phone = form && form.elements["phone"] ? form.elements["phone"].value.trim() : "";

  var addressInput = document.querySelector('input[name="address"]');
  var carInput = document.querySelector('[name="car"]');
  var noteInput = document.querySelector('select[name="note"]');

  var params = {
    action: "alloc",
    phone: phone,
    name: window.pendingUserName || "",
    address: addressInput ? addressInput.value.trim() : "",
    car: carInput ? carInput.value.trim() : "",
    note: noteInput ? noteInput.value.trim() : "",
    coupon: window.pendingCouponCode || ""
  };

  return qcadsJsonp(QCADS_API_URL, params, 12000);
}

function spin() {
  if (spinning) return;
  spinning = true;

  var currentDeg = 0;       
  var speed = 25;           
  var isApiReturned = false; 
  var apiResult = null;     

  function fakeSpinLoop() {
    if (isApiReturned) return;

    currentDeg += speed; 
    
    ctx.clearRect(0, 0, size, size);
    ctx.save();
    ctx.translate(center, center);
    ctx.rotate(currentDeg * Math.PI / 180); 
    ctx.translate(-center, -center);
    drawWheel();
    ctx.restore();

    requestAnimationFrame(fakeSpinLoop);
  }
  
  requestAnimationFrame(fakeSpinLoop);

  qcadsAllocPrizeFromApi()
    .then(function(resp) {
      if (!resp || resp.success !== true) {
        throw new Error((resp && resp.message) ? resp.message : "L·ªói k·∫øt n·ªëi.");
      }
      
      var selectedIndex = Number(resp.prize_id);
      if (!isFinite(selectedIndex) || selectedIndex < 0 || selectedIndex >= segments.length) {
        throw new Error("D·ªØ li·ªáu gi·∫£i th∆∞·ªüng kh√¥ng h·ª£p l·ªá.");
      }

      apiResult = { 
        index: selectedIndex, 
        winMoney: LIXI_MAP[selectedIndex], 
        vcode: window.pendingCouponCode || NA_makeVoucherCode()
      };
      
      if (apiResult.winMoney === undefined) apiResult.winMoney = 100;

      isApiReturned = true;
      startDeceleration(currentDeg, selectedIndex);
    })
    .catch(function(err) {
      isApiReturned = true;
      spinning = false;
      qcadsShowAlert(err.message || "L·ªói k·∫øt n·ªëi kho qu√†. Vui l√≤ng th·ª≠ l·∫°i.");
      drawWheel();
    });

  function startDeceleration(startDegree, targetIndex) {
    var segmentArc = 360 / segments.length;
    var prizeCenter = (targetIndex * segmentArc) + (segmentArc / 2);
    var targetRotation = 270 - prizeCenter;
    
    var currentMod = startDegree % 360;
    var distToTarget = targetRotation - currentMod;
    if (distToTarget < 0) distToTarget += 360;
    
    var extraSpins = 360 * 4;
    var totalDistance = distToTarget + extraSpins;
    
    var finalDegree = startDegree + totalDistance;
    var duration = 4000; 
    var startTimestamp = null;

    function rotateDecelerate(timestamp) {
      if (!startTimestamp) startTimestamp = timestamp;
      var progress = timestamp - startTimestamp;
      
      if (progress < duration) {
        var ease = 1 - Math.pow(1 - progress / duration, 3); 
        var currentAnimDeg = startDegree + (totalDistance * ease);

        ctx.clearRect(0, 0, size, size);
        ctx.save();
        ctx.translate(center, center);
        ctx.rotate(currentAnimDeg * Math.PI / 180);
        ctx.translate(-center, -center);
        drawWheel();
        ctx.restore();

        requestAnimationFrame(rotateDecelerate);
      } else {
        spinning = false;
        
        window.pendingSegment = segments[targetIndex];
        window.NA_LAST_WIN = apiResult.winMoney;
        window.NA_LAST_CODE = apiResult.vcode;

        NA_showLixiView();
        NAwinValue.innerText = "Anh/Ch·ªã nh·∫≠n ƒë∆∞·ª£c " + qcadsFormatResult(apiResult.winMoney);
        NAvoucherCode.innerText = apiResult.vcode;

        NA_show();
        setTimeout(function(){ NA_burst(apiResult.winMoney); }, 160);
      }
    }
    requestAnimationFrame(rotateDecelerate);
  }
}

function qcadsBoot() {
  var closeBtn = document.querySelector('.popup-form .close-btn');
  var dismissLink = document.querySelector('.popup-form .dismiss-link');
  var form = document.getElementById('registerForm');
  var wheelContainer = document.getElementById('wheelContainer');
  var spinBtn = document.getElementById('spinBtn');
  var giftBtn = document.getElementById('qcadsGiftBtn');

  if (giftBtn) {
    giftBtn.addEventListener('click', function (e) {
      e.preventDefault();
      e.stopPropagation();
      window.showPopup();
    }, true);
  }

  function hidePopup(){ window.qcadsHidePopup(); }
  if (closeBtn) closeBtn.addEventListener('click', hidePopup);
  if (dismissLink) dismissLink.addEventListener('click', function (e) {
    e.preventDefault();
    hidePopup();
  });

  function isPhoneValid(phone){ return /^0\d{9}$/.test(phone); }

  if (form) {
    form.addEventListener('submit', function (e) {
      e.preventDefault();

      var name = form.elements['name'].value.trim();
      var phone = form.elements['phone'].value.trim();

      if (!isPhoneValid(phone)) {
        qcadsShowAlert('S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá (ph·∫£i c√≥ 10 s·ªë v√† b·∫Øt ƒë·∫ßu b·∫±ng 0).');
        form.elements['phone'].focus();
        return;
      }

      var couponCode = 'NA' + Math.floor(100000 + Math.random() * 900000);
      window.pendingUserName = name;
      window.pendingCouponCode = couponCode;

      form.style.display = 'none';
      wheelContainer.style.display = 'block';

      var wheelBox = document.getElementById('qcadsWheelBox');
      if (wheelBox) wheelBox.style.display = '';

      var res = document.getElementById('result');
      if (res) res.style.display = '';

      if (res) res.innerText = '';
    });
  }

  if (spinBtn) spinBtn.addEventListener('click', spin);

  window.showPopup();
}

if (document.readyState === 'complete' || document.readyState === 'interactive') {
  qcadsBoot();
} else {
  document.addEventListener('DOMContentLoaded', qcadsBoot);
}
</script>

<script type="text/javascript">
function qcadsHasPopupWidget(el) {
  while (el && el !== document) {
    if (el.className && typeof el.className === 'string' && el.className.indexOf('popup-widget') !== -1) return true;
    el = el.parentNode;
  }
  return false;
}
var qcadsPopup = document.querySelector('.popup-widget');

document.addEventListener('contextmenu', function (e) {
  if (qcadsHasPopupWidget(e.target)) e.preventDefault();
});
document.addEventListener('keydown', function (e) {
  if (!qcadsHasPopupWidget(e.target)) return;

  var key = (e.key || '').toLowerCase();
  var isCtrl = !!e.ctrlKey;
  var forbidden = { u:1, s:1, c:1, x:1, i:1 };

  if ((isCtrl && forbidden[key]) || e.key === 'F12') e.preventDefault();
});
if (qcadsPopup) {
  qcadsPopup.style.userSelect = 'none';
  qcadsPopup.addEventListener('copy', function (e) { e.preventDefault(); });
  qcadsPopup.addEventListener('cut', function (e) { e.preventDefault(); });
}
</script>

<script>
(function () {
  var reduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (reduce) return;

  if (typeof confetti === 'undefined') return;

  var fxCanvas = document.createElement('canvas');
  fxCanvas.id = 'qcads-tet-fx';
  fxCanvas.style.cssText =
    'position:fixed;inset:0;width:100%;height:100%;pointer-events:none;z-index:180000;';
  document.body.appendChild(fxCanvas);

  var myConfetti = confetti.create(fxCanvas, { resize: true, useWorker: true });

  // ƒë·ªïi "üå∏" -> "üåº", ho·∫∑c "üíÆ"
  var blossomShape = (myConfetti.shapeFromText)
    ? myConfetti.shapeFromText({ text: 'üåº', scalar: 1.15 })
    : 'circle';

  var rainTimer = null;
  var fireTimer = null;

  function blossomRainTick() {
    myConfetti({
      particleCount: 2,
      angle: 90,
      spread: 55,
      startVelocity: 0,
      ticks: 320,
      origin: { x: Math.random(), y: -0.08 },
      gravity: 0.33,
      drift: (Math.random() - 0.5) * 0.7,
      scalar: 1.05,
      shapes: [blossomShape]
    });
  }

  function fireworkBurst() {
    var x = Math.random() * 0.78 + 0.11;
    var y = Math.random() * 0.25 + 0.18;

    myConfetti({
      particleCount: 110,
      startVelocity: 58,
      spread: 360,
      ticks: 240,
      origin: { x: x, y: y },
      scalar: 0.95,
      colors: ['#ffde59', '#ff3b3b', '#ffd166', '#ffffff', '#ff9ad5']
    });

    myConfetti({
      particleCount: 28,
      startVelocity: 32,
      spread: 220,
      ticks: 180,
      origin: { x: x, y: y },
      scalar: 0.7,
      colors: ['#fff7c2', '#ffffff']
    });
  }

  function startTetFX() {
    if (rainTimer || fireTimer) return;
    rainTimer = setInterval(blossomRainTick, 120);
    fireTimer = setInterval(fireworkBurst, 2300);
  }

  function stopTetFX() {
    if (rainTimer) { clearInterval(rainTimer); rainTimer = null; }
    if (fireTimer) { clearInterval(fireTimer); fireTimer = null; }
    try {
      var ctx = fxCanvas.getContext('2d');
      ctx && ctx.clearRect(0, 0, fxCanvas.width, fxCanvas.height);
    } catch(e) {}
  }

  window.qcadsTetFX_start = startTetFX;
  window.qcadsTetFX_stop  = stopTetFX;

  var _show = window.showPopup;
  window.showPopup = function () {
    if (typeof _show === 'function') _show();
    startTetFX();
  };

  var _hide = window.qcadsHidePopup;
  window.qcadsHidePopup = function () {
    if (typeof _hide === 'function') _hide();
    stopTetFX();
  };

  document.addEventListener('visibilitychange', function () {
    if (document.hidden) stopTetFX();
    else {
      var popup = document.getElementById('qcadsPopup');
      if (popup && popup.style.display === 'flex') startTetFX();
    }
  });

})();
</script>

</body>
</html>
